# crossroads

<h1>초보자 운전 연수 프로젝트 - 'crossroads'</h1>


<h2>1. 기획 의도</h2>
<img src="https://lh3.googleusercontent.com/fife/APg5EOaoqnK8v5ZTw3Yv-17pmEs1VvpwG3E1exJDHsAikTfnfwVGcPQUuQBhvOqBV9opsqxGR2Oa1SWmy52tiycJkPGxI4q2teB5bHbROdLJWKGEoGBcpzo11xnUfS75xYrP8W2zMs9XkiOxdfDazJcCgUuEOEKim6yHuBV7wcNOPmcmf77I8ihXtWOkQFwPYSf3pUr5op3L5zLcItPI1apEzGr7i2m_GVqK59mQATf71UPsnm0m8MZjL53ilbwUezv7ABn5mL4WF85_o4Jngpj9h7J0KR4YhC4sAE0zJyQm9bFF_eNqnRYx8muH-vZTYnyYymWXzWgry-JGzMh_dKk9eaViAbR0ZbiyH1VAsjadQfQEwczwR2tc2s8irr-ZUBSqw99fdfak4YWYack9Z2RoZAWW_6qz-FUTJ2YsHbnvxDl9KAJSV0LDsfQdnDPjYFEUP6736HdmuYDw9nJ0_1l636qojHntZlHD4TKqnt5ADkHLUAIEx-Qa9olaMXP5AggxuGFgA1CEb2Cu1iOlUFx_YmzebBe0vMLq7Jm99y1r6ZonTG2HmdG_LLDcfAP3GQBajU9dn5bmKXUFevza7uXvCKz5__SSaTlGdGPmosCvCzGCbzxetFyCmHUybLiLV-_8W6MZ3xRnWCZf0mZrXVFe-LOJNzu9AOIA4dSS3GhyrcGqgD70xApYcnvNBTKEmifPtrEHgj79o7P3qdN7VFhah4TE6wPvxLNiLfDyY_dkInKvTjzFYcMqlPbJCEgkwCLBmHYo8pE3fXajgvGpPKWURTyHNOlL1CEKzTOnMMnx43cT5XtS1Awy5-8I0LxQaDSly6wBQPyF7DEyBosw4GZ9ApxmkpWzgudveSu8DSER-0AKiSDaa-Y6lYB9GKC9PP7cFji27KhGI2U55TQqQUv4Rh3xIaKuaYM4dFc7FCAFOpHIyy9nJp5As32zA2dH7W_w5Xill9I29FVdkQNec22nSryhrtxfghjqVSyWjSyu1rFx5XQTQqXN2toH8X-MC26YtDT6-wmrfajec1zTpl10I6XQ8qbzeoRnvtqJoN0PtdKVJpsk-J532IWqNdKShaAcc06GipFc3_U9BliLFeftH0jgrDkRimjlZzXIkBdWt_AIJo3FPRCPX1tJKdeI80yuEo1YfiQ60x7U-sJqz1iVYra1sEHxxmkEeXdcCSvebwKR3bR7SqSbF3Eiie_xbSvgJ1L3wSUyiLwZq3kzgHRciqXBHgoHrngDdJPxQiGXEsz8AEIhqNPJXvb7edeRVgkC1s4ztlUBr9yFipcx0CX-mw58TMhxelzekLYYpR52TebMNW1Gn3ONs9oDL98Ce-V3n-srSdAmPjbK5BKYzePwTZfn19IHntDODEm83VxcHF4hu8wIEi55Z1WSS3pxdsq3SdG8YKNDRWhOme2DtWL31ozh73DRjgU7aA_iWBNlreWlYVralCo954M8OUFrdnSpbHsl57n8aAoHn1tZxBm6ZZIKxqx-HrYuZITwyZakCeHtAaKgWBrAP3FRiAxq=w1920-h892" style = "width: 80%; height : 480">

해가 갈수록 운전면허 소지자의 숫자는 증가하지만, <strong>취득 당해년도에 운전을 시작하는 비율은 36%</strong>가 전부이다. 신규취득자 10명 중 6명은 면허만 취득할 뿐, 운전을 바로 시작하지 않는다.
이 초보운전자들은 운전의 경험이 부족해 운전하기를 주저한다고 답한다. 따라서 에코위원회 팀에서는 <strong>베테랑 운전자와 초보 운전연수자를 1대1 매칭</strong>하여 개인간 운전 연수가 이루어질 수 있도록 기획하였다. 

</div>


<h2>2. 기대 효과</h2>
<img src="https://lh3.googleusercontent.com/fife/APg5EOY8ytbtjdN1tbnB5pHjTfm-uf_IIIsEsvW3XJlZD8gmJ440-myM9IDsULAMHTNSqNE9IJWkhp305wNpXDpzr4i9wMjeOS8jy5N8egZ9mN0fjf6Plk7-wge9WiBTdnhSpOehogr7iLpm9rIkQcHVyA5w5b_Tl7MxJKj_aOwL6JSgOxX0HU-26tPzlFTV9bvyD5YIJG7SFb-_m1WqUrHBv-8VzZrtcOUcnVA3JMR-ljh0eosDFtfgXIGjAaFyyvggFojzndTXsaTPO9fAjAO4Wy2DTIArkV9KjPnfcKwfSWIsVjZSb63j7A9D3EcFQ2jiQ3str7rb-lPjrcr1vELl0OOPnu6HpOKgPlgT9UnMX_nsINQWDq1HIxszYcWgOj63NVeE6rpAz4O5oENgy2Ef2Gm7Q8uAA33YEz3JZc91LdxdfgTwSPzlcRFutddYPhmgrQnngzpQAq4Ij6wnECHikv1_Wtcc3ltz2zm8hMpl6qY-tqba_Lj2E1HpfnRN_EQp3RylVHwmXFTn61mIk77dM52gSZvQqFjyoAVciDYJ8FRjh9yM7IC3DIf6KVK8kyqLu7R94-dT-NqUbOk6PT7AQsrP3TrbBy0slOih1w9R52Bgwrj82O4uJO0WhGQhGUsFgzq8l5ocDg0u69knDHSRHCJZKCT-mD8P9iu3t5tnn14M3XnW3Mipan6L4A5tFyLm9um8F2vJWFIE4fedq9O3f0X4nf6XTgWXazEbIXsPAigY2Q4NapguAIZRgBzmq4TSwAQcYFQpldzZtoqVf0Ht9Q-5ojeK21xJYA02xdTPPmPZeegDXKboqqCSkPV-oaYqrTfSKnhKli8HbSnZk0XtP751B6ymLrR94agMD_mwSU-DHJYOXqSPeRXXMJpPpYa4_pJR_TAeQh-OGqlC7DFDodLt0quXb5bfbokHW9y4VJvPdxG2Ur6UeWhGW72N-nF5WwfoBSipy5qCa-xG7V46qVznaPp3Q18RDauIubRoLqVv-DMPPI9r92TIsd_ytFzbsKYDdQ5iDr5ktQQfc8zPqzMXDx87fAFfZu1tMJOS_8BKy_MsSBEbLjhIBLCCWVtSvmGJ-MU8RJIz7PPWtPwasqQdl74EzvvinXEf07t98xKaBkX1xWITbZCxoGADwHAnq_ChECujA_dchHReQ-sYZfdCsys4OMuHhzEM5ucJWUx3ZzQjXam9KUjcrB4D0iW1zr0F3Y4ZUGfUSHRTC2CcDBnVeX9N2H1phOIAVIfCi7F4N9vG3V5jrv_iSGIsz0U50s3hgkrrb5SM7XcJba2A3rCyooqQHGlZUn735GHbQUeHuySOmtD0Rdox67kraQZiuJvIf9Dij6HM94DoJXSY_eC1TLOtOpxQHGzRBG243jxdVNZd-5EE4q4jhxWI7eUWZdOezqpwghhM_mv5OmGQeqeHF1RWqK_OHuCOyvBnYoewMPLg6x_lk1YbKqsPQayfhJcpJqi6p6FSZWeYOgD1B4MkUs0XCY3jiWCxf1kXRH_oMskwmQF7kihyVOlq=w1920-h892" style = "width: 80%; height : 480">
STEP 1. 베테랑 연수자와 초보 연수자가 원하는 날짜와 지역을 선택할 수 있게 하여 시간과 장소에 구애받지 않도록 한다. <br>
따라서 바쁜 현대인들도 정해진 스케줄이 아니라 맞춤형 검색 시스템으로 사용자들의 편의를 제공한다.<br>
STEP 2. 코스별로 금액을 지정하여 금전거래가 이루어진다. 이를 통하여 연수의 선순환을 창출하고 회원간 연수를 독려한다.<br>
STEP 3. 이렇듯 초보운전자들의 운전경험이 많아진다면 결국 운전미숙으로 일어나는 사고는 감소하게 될 것이다. <br><br>
교차로 프로젝트는 초보자들의 운전연수 경험을 통해 실력을 향상시킴으로서 최종적으로는 교통사고율을 감소시킬 수 있도록 기획하였다. <br>


<h2>3. 프로젝트 사용 툴</h2>
- Java<br>
- Java Script<br>
- tomcat<br>
- jQuery<br>
- MyBatis<br>
- Spring Boot<br>
- MySQL<br>
- Visual Studio Code<br>
- DBeaver<br>
- Sourcetree<br>
- git, github<br>
- JSON<br>
- Ajax<br>
- JDK 11.0.15<br>
- Naver DEVELOPER API<br>
- Kakao DEVELOPER API<br>
- SMTP Gmail API<br>
- Google Cloud Vision API<br>

<h2>4. ERD</h2>
<img src="https://lh3.googleusercontent.com/fife/APg5EOZn5xKCrWyBGnAO6Kjx01bUERgnejSENdskzzjHLHZ7qUs14orSZ4Wz1OWtaJXEYj0M80hkwgrPyjyDZOcbKSpMpCrkEXMhi4x5Y5v-u1N1kDPtbV1R5a3_g0kNYdZXqz4e_dBUfe3pRFrlhBAoXIzfakGVh0Y8d9ace1GnHW6CLgYpN3Q-5JwSwVqnjoARfLbclra2nDZhBdBsynQ5mg_oEH9_yMvMX4h0YSbKLxd4YGmF99y59rsywet4KnqO7GEjd-Hi1FSFfHwbTrGWuc_VfoaimRvzs3iF_fpuqS5kOHCGniTIVCJea9y5ugCx4uU0i6ZGIPXeLZTvMFIdyz6mDON3Z03rNjI4n0Hc7FDMLkTSMkVRvbGUtgd1R_-mVj73_DVdbwjx6Ihu13-3EXCz_3n7kYHYgDrgcIKODVEeoSFPveMoaskDRbebJN0HpoF8HKO5f2CjdOMvotoF8ZQf4MDvrBQILWR76FuG8b1hcExzo1ampC-NaCfI1_fgcHJyxkCC212_QKIOqA8ym-31rHGjGKjBGl8qdbeg0LV4Dg_yvpz3NTPFgWcCt7s_LprbPdxQEoP4vDeJvj3qrhuW6AD4e5lI3WXqjZEzMKgDmQOyttVI_4YwRw-gK9Oq04niyoLA71yYKZhKKMqWBc31VBriwH_ti3Ki7Q774PmptzMjR-YJP7JtnpiimA0Hx021O9M5ECCzYtNRsJY8CMoCMPnka-h-Vzwl63EMufAEzDmDWcsSbqRiq8JwZNsSqujdNmGG12vK3yxgTuV2p9y8dC0Uh5uKeG4TQlgm0Z2GoT8ZvIvK2M4dHfpvvLqAEsz2JuzWNvzR9wXFDuaj4vNaG9R8O94mv503Ul8iHw6rPss4Bq-h1Nwo__SxriXxnuRBGpqF1HgxCYz-KLOG3h_GeQ-NYEb2eMifcvEzl5Gc1b47xf-tYnt0qHlug_KCUJE6RHRTzEJGmPqqDmn8JxYsXq6wz-vT0E63bsvj0n-OICQfXVjrh1u61pjbbRp0R-hyICayJl27dKL_GNuAHRatPsraep70-1q9f2iYN69bhBI_3emh0zfN3-ZnS_bynqHa9_9jz7QMO4Vju4yKh-OJZdqJoIkfixRwRqkguWy6g3a2haurb6y1x1FuQletWA6aOf__hmhPKgSDK8L-uH_FedavZ1XcPlA9oiqnZSYuVTAR1xhdYV5yXIkLXGo5nhhpvPZClCfX5S4ybcthVhZ3RllZNELwta-fj6t7-ymz0Ozq3jc9CIv0O4wkauScLMcKb10fb8_Sdm_wS3c6abxmmYzzizIeQyh4nm4jdyGLFH10cL6jLA0t-3sqSORIPKWfviyVEesXbR2JHPTxOI2TuevDzhGcZblAaszMKrCrxlbDz4XA23rgAryHsqq1S9bEYkGaVYph1KOTq1P9aymnOMrJOXoDJygmEkVJDkr52OJ4hzHPStvyYocWCqgSJXPjJQVuVUeEum5MgFB5bP4zHIk9Q2VfN2hqXsu9KxSwnhbP-N4mlo6l8sts=w1920-h929"  style = "width: 80%; height : 480">

  
<h2>5. 담당 업무</h2>
5-1 프론트엔드<br>
<img src="https://lh3.googleusercontent.com/fife/APg5EOYxNYHTDUowAoBF_lySeXMALleA2wBGa1cOOuS0EMmy3xj7jhGU4E04cOKCdf018-CvUoX4WUJK1uv4iTiGox_qJktWonBkUl1j8NIL7pMtP6nH8qkxvT7Kf871sK8eCITjOtg0All6vT4NDP--M7-jaQHSu1vzhnjoNGyzHqZ3n3NX0nBE_kLVuic2e4ML6R6gTJ8m9pCYpEyZFqA6KtKM04At04gmGMuVr1qo6xyp71eklgc3Yjn6bhXa66JogKwrubcYRiZ-jz9gNd03PNGsOg1KZownjWMu0976z1bJzudMwuSnfNXxhC74hoZbtjG1AnQBl-C51XpZvB2aOtP55PPfaSahfZnXfyg69TF0IHBJvtBr4tsWpaNyq_6YvDhqjVq-EQh5O8tKxrBLr0iIqWm1_d7AFIUqkp2qZr-83oW1hP4mZXlphcn0ywXiXZ-l_OJiobyOZ_jqM3mOVfeEu_-GMTpod7ahUgO8EGSbEl6ElQDBnPxJ6qwguL8wLOC5eM23ps5K2BLd8CeHbNX9XLPgMDRzTKAH11r52JXy8eI6_hr-ATGaMVqNfHlPmeT-ipyvrZIAvQaqgmAqeC348229FcASXFXj_MjhowVqCu83eO7lDVrFVlT22Na5Ray3dBG6LMyylwkYbMsqAIzpunggHbD92qoVYH5hBp-qP8BQjNoxp2lEKX6SdFIpzeghjnyooo4poUxNZ5y2-gMRbMG82ClmN8fmdgImW1LHUj9F7FYOtnUy5gYkDbyIOcFvc7jvWXPW1uFOVrCMv8k-ygTH1xpIOnOUy1UkXBI5x5QLK3Skp7l50iVSYa5LelzQ2Hicj13DZ38pppp9P3SrtbpL6JnvM1Ydab1OjMx43ZkktnnCq_62fQyQHOmwt5KxlsGFNx-JZSmXd1Ns2Ky2IwxCm--9bY0ig7osCF1DW0TUMvBdRCnL6udj-UbYb0dq60PzsTIInuJi5_l2xxmwZAQZiXu-W6gaFm7c44HwDfEFyLzcgZm8CUbr9XzA_FnQGuHQdxoVLUjM3_9aoM8pGIGqfsV3DkO5saV6QssdvIVbRg3A1hmWXE5B2VSpCwwPjXDfo_Db8mhxNT_LIGihbXcTVJ-yZORAGD7XdFebbjkfCvd_wirPzXxH6CP4PrEojnFFtjzOI9QI1Hnev93qBkFSghQ5MGz33So_lSrQQgPaidigzjZRjAkKOWclW0Mpe8uYlUiN02VcP_gaDpfktCdbXvPTbCZEWYFsfSPjpU7SiL38of9uaEiEGI26JP_bfg4O3SroEYxJ2sAzpXXVn1gaOriIYX2qX0-WFm58eKEIJc_mHD7H3e2ILX8uXTU4qzSSUgT3Lis057pdulnYp1H7-1B10lg9pRGS24a2wMoLl2-y887RGWAdu-Z-_HCHGoDuaQ1iIxPzNNGdLL1zWbZv54YvPqposf5SKzRr1v2KEyea-efY40PYPglOXTGiFJzWwslC1sBmfR91gceQR40C3tWbKVBxJFySVhN2jrxW5zfF1r33qUGY=w1920-h892" style = "width: 90%;">

▶ 회원정보 확인 및 수정
- 연수 내역
- 나의 후기
- 포인트 조회
- 내가 쓴 게시글
- 내가 쓴 댓글

▶ 비밀번호 변경
- 이메일 등록
- 이메일 발송 완료
- 비밀번호 변경

▶ 회원 탈퇴
- 비밀번호 인증
- 탈퇴 약관 동의

▶ 오류페이지
- 404 오류(웹)
- 404 오류(모바일)
- 자유게시판 준비중 

<br>
5-2 백엔드<br>
<img src="https://lh3.googleusercontent.com/fife/APg5EObvLBxUpxUuoAQxMdFfOwbTSEI0CVJ9v00be8DDKu76tIIG-tFMj16Qp7lFGGX6JpPpCiElLoWU6zPzdiGfFQTO4U-6pl7CaqL5H6w-J8vf-WEH1H6ZrT8sFD0YAdOEA0wYbl0-vQB_kH-9LDukqoSV_JSbB4K71372HHBdRrpkTE9D7q6KpxsasIjsm3y5DtTj-7nPhQkX5Ewwkp3V3sbk-9cLHDW9G9VZCF-4UMwGgBE5Ner2ay-kDzbeJ3mHJbZWxbqkXMnEQySsoBjhhuA9u3v4DD0qPYfr4Nj65ZiykfeT9QaewUiiWYVqA_rzgnRTIgacWofRvljlTVJpu8iFqmSle19PM2jEEjPshcLM-UEp4w2NSceE_ko-jA1y1TB6vJ_PYgR21XYN7FCE6JgR34uJUmM8V3SlYSH7GeUPjKonLoA3tMxTFU919vyv9spLz3wduytUeAhIU6qd_dFi5CzU_fiLzHzudS9A10oYkItx2dF0t2qxcMbTSt20tJM2PR__fTu4h9By_0_y_022I5IMhZt2xBpA67sapfHLUqF0q8nh_SRhcR94slUMlFFzcVCUCIzKyz85tPUuAksQMH-GqqXw_-8OnSe0ZiZ4IJlESUoBe9WTcRarBSuPWdxSzOl2qX_9eAiaBg8qeckEayjQBTK_U6NrefvJhs9zJuNas1soUheAj2cPpkSilhsakq16COi2XgcnXU6qT2r7AxEoko0XcNiHL31wfKbGfC9vtvjn3scol3_dYIXKrSMEBkReA4OGnU0hRLpM3xQbICyItL1gamEh2BF46zjxQozluBjpKqZyzr0o3gA0N41GMGXOHx82eLvKR1lO9TmR6AoKiMCSoG5Wfd8i0A2_ZpsA6B97PQ2JgNuHqOaTXjSDbT4mCk4OKnKOnLo1rSq8RdoAuTXIHXS-VGt9pxrZxOLgbiKHjOlpCa4m1wVrN-mujsE39mFptbYcsTOlBeafe_7EK2GMSKfy12p0IH4cWhF05KpjfaTcAflN5SjHZ8JMeQsNVA-8RlYicJGDoTmnTi-D_Md--uvkSgTZnKa7A1jk-mOr87gRJ22mtwGLcjA9p-QkHqpqYaH7PptQDNA3pf3tYGRPykAW0rzYv5JZFw8Bf1SaENDXFjc5RPamCCPtpDKUxk_9xDfXnnfdwiZKztkXytDS80ltm7ujhi1qdKSTkgXBii3RkUQPQklrFfbv4ySIsWPD7N509iygpybIQoeX7ydRJDoXqsIerAETf2YGZWozEqgHZMd4emFVPdkHHgkjVJoX_xwFA7g4LdgKl8Jf0gBZaKJrlpv2qJb0ARJZuXDf_IoYZJgTzdAwB_g0D5rIK6iOOVxM5f9TwSQH66T94TIrfsxLCFDFcwWfm8LmIiSuUYzGn0b95Oo8FQ6Nr_jerCvMCCEanW8qcTjFmpU0U78mDEbms2nIznP2pMYEf26KgiWNeaQ5TUD3zmsSvFhKYVbbWvxWah2Mi-qoTfTUVTSPZ8evwNh_t9tdZLtw4zbRxKXFvz-E=w1920-h892" style = "width: 90%;">


▶ 회원가입
- 아이디, 이메일 중복 검사
- 아이디, 이메일, 이름, 휴대폰 입력 형식 검사
- 구글 클라우드 비전 API를 통해 운전면허증 하단의 취득일 자동 감지 및 회원구분
- 필수 정보 입력 여부 검사
- 조건 충족 시 회원가입
- 카카오 API를 이용한 간편 회원가입
- 네이버 API를 이용한 간편 회원가입

▶ 로그인
- 아이디, 비밀번호 DB 비교 로그인 기능 구현
- 카카오 API를 이용한 간편 로그인
- 네이버 API를 이용한 간편 로그인
- 로그아웃 기능 구현

▶ 비밀번호 찾기
- 사용자가 입력한 이메일과 DB 비교
- 정보 일치할 경우 SMTP API 이용하여 비밀번호 변경 링크 발송
- 비밀번호 변경 구현

▶ 연수신청
-  로그인 여부 확인하여 페이지 이동
- 이름, 보유 포인트, 휴대폰 번호 조회
- 보유 포인트 0일 경우 충전하기 페이지 이동
 


<h2>5. 느낀점</h2>
<h3>5-1. 어려웠던 부분</h3>
📌그룹 채팅 DB를 설계할 때, 하나의 메세지에 대해 채팅 수신자가 여러명인 점을 어떻게 반영해야할지 고민이 많이 됐다. <br>
✔ 채팅 테이블과 채팅 수신자 테이블을 따로 만들어서 채팅 테이블 PK를 채팅 수신자 테이블에서 참조하도록 구성했다.<br><br>
📌프로젝트 초반에는 entity와 DTO를 언제 어떻게 구분해서 사용해야 하는지 감이 잘 잡히지 않아서 헷갈렸다. <br>
✔ 프로젝트를 통해 학습과 적용을 반복하다보니 자연스레 언제 사용해야 하는지 알게됐다. 특히, DTO에 내가 필요한 변수를 능숙하게 선언, 사용 할 수 있게 됐다는 점이 큰 수확이었다. <br><br><br><br>


<h3>5-2. 문제를 해결했던 부분</h3>
<h4>📌WebSocket session 실종사건</h4> <br>
🌩문제 상황🌩<br>
웹소켓의 경우 해당 채팅방에 접속한 모든 참여자의 WebSocketSession을 받아와서 메세지를 보낸다. 메세지를 보내는 메소드는 자바스크립트 메소드인 onMessage()인데, 어찌된 일인지 onMessage 메소드가 실행되질 않았고, 오류문도 나오지 않았다.<br><br>
🚨문제 원인🚨 <br>
채팅이 전송될 때 거치는 모든 메소드와 컨트롤러에 전부 로그를 찍어봤는데, list에 담아둔 WebSocketSession이 중간이 실종된다는 것을 확인했다. 즉, 메세지를 받을 대상이 없었기 때문에 onMessage 메소드가 실행되지 않았던 것이다. <br><br>
🚀해결 방법🚀<br>
WebSocketSesssion을 담아뒀던 list를 static으로 선언해서 해결했다. Java에서 Static 변수는 메모리에 한번 할당되어 프로그램이 종료될 때 해제되는 변수로, 메모리에 한번 할당되므로 여러 객체가 해당 메모리를 공유하게 된다.<br><br><br>



<h4>📌채팅방 확성기 기능 사건</h4> <br>
🌩문제 상황🌩<br>
A사용자가 a채팅방에 보낸 메세지가 B사용자가 접속중인 b채팅방에도 전송되는 현상이 발생했다. 이 현상이 마치 게임 메이플스토리의 캐시템 중 하나인 확성기 같았기에 채팅방 확성기 기능 사건이라 명명했다.<br><br>
🚨문제 원인🚨 <br>
위에서 접속자들의 WebSocketSession을 static list에 담았다고 적은 바 있다. 다른 채팅방에 접속 중인 사용자의 세션 또한 동일한 list에 담겨있었기 때문에 메세지를 받게된 것이다. 그렇다고 static을 지우자니 다시 메세지 전송이 되질 않았다. <br><br>
🚀해결 방법🚀<br>
메세지를 전송하는 메소드에서 발신자의 채팅방과 수신자의 채팅방이 일치하는 세션들에만 메세지를 전송하도록 만들었다. 이를 위해 우선 채팅방을 클릭했을 때 이동하는 컨트롤러에서 HttpSession에 채팅방 아이디를 추가하도록 만들었다. 즉, 채팅방을 클릭할때마다 HttpSession에 저장된 채팅방 정보가 바뀌는 것이다.<br>다음으로, WebSocketConfig 파일에 .addInterceptors(new HttpSessionHandshakeInterceptor()) 를 추가했다. 이를 통해 HttpSession에 저장돼있던 값들을 WebSocketSession에도 저장할 수 있게했다. 이 두가지 작업을 통해 현재 사용자 어떤 채팅방에 접속한 것인지 확인할 수 있었고, 확성기 오류 또한 해결할 수 있었다.<br><br><br>



<h4>📌메세지가 여러번 출력되는 오류</h4> <br>
🌩문제 상황🌩<br>
A 사용자가 a채팅방 입장 → b채팅방 입장 → 다시 a채팅방 입장 이런식으로 동일한 채팅방에 여러번 입장, 퇴장을 반복할 경우 해당 사용자가 보내는 메세지가 화면에 여러번 출력됐다.<br><br>
🚨문제 원인🚨 <br>
위에서 접속자들의 WebSocketSession을 static list에 담았다고 적은 바 있다. 동일한 유저가 동일한 채팅방에 여러번 입장했더라도 해당 유저의 WebSocketSession은 list에 하나만 담겨있어야 한다. 그러나 입장을 할 때 마다 해당 유저의 WebSocketSession이 list에 추가되면서 메세지가 입장한 횟수만큼 전송된 것이다. <br><br>
🚀해결 방법🚀<br>
WebSocketSession을 list에 담지 않고, map의 value 값으로 담았다. map의 key 값은 HttpSession에서 가져온 유저의 아이디로 설정했다(중복 방지). 이를 통해 채팅방에 입장할 때 해당 유저의 아이디가 map에 key값으로 존재한다면 그 key의 value 값을 갱신하고, 존재하지 않는다면 key값과 value 값을 map에 추가하는 방식으로 구성했다. 따라서 동일한 유저의 webSocketSession이 여러번 저장되지 않았고, 중복 출력 또한 해결됐다.




<h3>5-4. 총평</h3>
<h4>🌟 두려워하지 말자. 나는 내 생각보다 집요한 사람이다. </h4>



웹소켓이라는 기술은 국비 교육 중 배우지 않고 독학해서 프로젝트에 적용한 기술이다. 당연히 주변에 물어볼 수 있는 사람도 없었다. 로직을 이해하는 것도, 오류를 해결하는 것도 너무 막막해서 초반에는 많이 괴로웠다. 특히 채팅 전송이 정상적으로 되지 않을 때 오류문이 나오지 않아서 더 힘들었다. 그러나 결국 나는 해내고야 말았다. 메세지가 거치는 모든 메소드에 값이 들어왔는지 로그를 전부 찍어서 문제의 원인을 발견하고 해결했다. 이 과정에서 나도 나 자신의 집요함과 끈기에 놀랐다. 지금까지 항상 스스로의 한계를 정해두고 새로운 도전을 꺼렸었는데, 이 프로젝트를 계기로 한발짝 도약한 것 같아 행복했다. 



<h4>🌟 내가 마주한 오류와 해결방안을 구체적으로 기록해두자. </h4>



정말 많은 오류를 경험하고 해결했는데, 기록을 해두지 않아서 많이 잊어버린 점이 프로젝트가 끝난 이후 아쉬웠다. 간단하게라도 블로그에 기록하면서 기상천외한 오류를 겪을 동료 개발자들에게 한 줌의 도움이라도 주고싶다. 



<h4>🌟 어떻게 더 친근한 동료, 친근한 리더가 될 것인가. </h4>



해당 프로젝트를 진행하면서, 프론트엔드 작업을 진행할 때 우리 팀의 팀장이 국비 교육에서 중도탈락했다. 나는 얼떨결에 부팀장에서 팀장이 됐고, 프로젝트 기간 동안 리더의 역할을 수행했다. 약 한달간 팀장으로서의 역할을 수행하면서 중간 관리자의 고충을 약간이나마 알게 된 것 같다. 특히, 커뮤니케이션에 미숙한 팀원을 어떻게 이끌어야 할까? 라는 질문에 대해 고민하게 됐다. 몇 주간의 고민 끝에 나온 나의 답은 '더 친해지자!'였다. 친하지 않으면 같은 말도 서로 더 날서게 받아들이기 쉽다. 따라서 팀원의 업무 태도를 지적하고, 해결하려는 자세에 앞서서 그 사람의 마음을 얻는 것이 더 먼저라는 생각이 들었다. 앞으로 리더가 될 때까지는 많은 시간이 남았지만, 항상 이 경험을 되새기면서 팀원들에게 먼저 다가갈 수 있는 우호적인 사람이 돼야겠다.    



